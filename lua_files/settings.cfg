{EOHS_LUA_FILE (<<-- settings.cfg
-- #textdomain wesnoth-Era_of_High_Sorcery

EoHS.default_side_settings = {
  can_spend_gold_on_spells = true,
  can_recruit = true,
  starting_level = 2,
  skill_points_per_level = 4,
  skill_points_at_level_0 = 2,
  summon_duration = "infinite",
  summon_cost_multiplier = 1,
  summon_experience_transfer = 0.25,
  mana_income_per_level = 2,
  mana_capacity_per_level = "infinite",
  { "starting_skillset", EoHS.deep_copy(EoHS.null_skillset) },
}
EoHS.rpg_side_settings = EoHS.deep_copy(EoHS.default_side_settings)
EoHS.rpg_side_settings.can_spend_gold_on_spells = false
EoHS.rpg_side_settings.summon_duration = 3
EoHS.rpg_side_settings.summon_cost_multiplier = 0.5
EoHS.rpg_side_settings.summon_experience_transfer = 1
EoHS.rpg_side_settings.mana_income_per_level = 4
EoHS.rpg_side_settings.mana_capacity_per_level = 15

EoHS.default_settings = {
  { "side_default", EoHS.default_side_settings }
}

EoHS.map_specific_default_settings = function()
  return EoHS.default_settings, false
end

EoHS.create_settings_picking_event = function()
  wesnoth.fire("event", { name = "side_turn",
    { "lua", { code = 'EoHS.settings_picking_event()' }}
  })
end

EoHS.current_player_picks_settings = function()
  local map_default_settings, separate_map_default = EoHS.map_specific_default_settings()
  
end

EoHS.settings_picking_event = function()
  local choice = EoHS.synchronize_choice(EoHS.current_player_picks_settings, function() return { ai_chose=true } end)
  
  if choice.ai_chose then
    EoHS.create_settings_picking_event()
  else
    EoHS.set_variable("settings", choice)
    EoHS.init_campaign_with_settings()
  end
end

EoHS.get_settings_for_side = function(side)
  local settings = EoHS.get_variable("settings")
  local side_specific = EoHS.get_subtag(settings, "side_"..side)
  if side_specific then return side_specific else return EoHS.get_subtag(settings, "side_default") end
end

>>)}
