this_parses_in_both_wml_and_lua=hackily--{EOHS_LUA_FILE (<<-- scenario_features.cfg
-- #textdomain wesnoth-Era_of_High_Sorcery
local getmetatable,ipairs,next,pairs,setmetatable,tonumber,tostring,type,unpack = getmetatable,ipairs,next,pairs,setmetatable,tonumber,tostring,type,unpack
local wesnoth,table,string,math,os,debug,helper,_,EoHS,_G,_ENV = wesnoth,table,string,math,os,debug,EoHS.helper,EoHS._,EoHS,_G,nil

EoHS.simple_unit_target_spells_list = "wizard_sword,ogre_fury,haste,restraint,regeneration,metamorphosis,dehydration,curse_of_anxiety,dark_pact"
EoHS.side_and_location_target_spells_list = "summon_fire_guardian,summon_arctic_drake,summon_sea_serpent,circle_of_protection,aegis,create_portal,summon_wolf,summon_giant_scorpion,summon_water_serpent,summon_gryphon,summon_vampire_bat,black_cat,summon_skeleton,poison_ground,summon_chocobone"
EoHS.special_random_castable_spells = "mage_shield,construction,change_terrain"

EoHS.do_random_spell = function()
  local units = EoHS.get_units({})
  while true do
    local action_id = EoHS.random (EoHS.simple_unit_target_spells_list)
    EoHS.debug (action_id)
    local action = EoHS.actions [action_id]
    local target = units [EoHS.random ("1..".. #units)]
    local parameters = {
      action_id = action_id,
      target_x = target.x,
      target_y = target.y,
    }
    if not (action.target_type and action.target_type (parameters, "actual") == "impossible") then
      EoHS.do_action (parameters)
      break
    end
  end
end


 -->>)}
